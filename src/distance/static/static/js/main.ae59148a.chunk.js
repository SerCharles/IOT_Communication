(this.webpackJsonpiot_frontend=this.webpackJsonpiot_frontend||[]).push([[0],{44:function(e,t,s){},51:function(e,t,s){"use strict";s.r(t);var n=s(3),r=s(0),a=s.n(r),c=s(11),i=s.n(c),u=(s(44),s(27)),o=s(70),l=s(81),d=s(72),p=s(82),j=s(73),b=s(74),x=s(75),f=s(52),h=s(76),v=s(77),m=s(78),O=s(79),g=s(80),y=s(12),w=s.n(y),N=s(23),k={success:!1,error_code:-1,message:"\u7f51\u7edc\u5f02\u5e38"};function F(e){return{success:!1,error_code:e.error_code||"-1",message:e.message||"unknown error"}}function Y(e,t){return _.apply(this,arguments)}function _(){return(_=Object(N.a)(w.a.mark((function e(t,s){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:if(!(n=e.sent).success){e.next=8;break}return e.abrupt("return",{success:!0,data:s(n)});case 8:return e.abrupt("return",F(n));case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",k);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var B=function(){var e=Object(N.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/distance/status");case 3:return t=e.sent,e.next=6,Y(t,(function(e){return e.data}));case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",k);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(N.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/distance/reset");case 3:return t=e.sent,e.next=6,Y(t,(function(e){return null}));case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",k);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),S=s(26),D=s(25),I=s(24),M=s(4),A=s(29),H=s.n(A),G=Object(o.a)((function(e){return Object(l.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},paper:{margin:e.spacing(2),borderRadius:e.spacing(2)},header:{padding:e.spacing(.5,2),borderColor:e.palette.divider,borderWidth:"0 0 1px 0",borderStyle:"solid",display:"flex",justifyContent:"space-between",alignItems:"center"},content:{padding:e.spacing(1,0)},progress:{padding:e.spacing(.5,2),display:"flex",flexDirection:"column",alignItems:"stretch",whiteSpace:"nowrap","& .status":{display:"flex",justifyContent:"space-between"},"& .status-success":{color:S.a[700]},"& .status-processing":{color:D.a[700]},"& .status-failed":{color:I.a[700]},"& .files":{},"& .result":{},columnGap:e.spacing(1)},exception:{display:"flex",alignItems:"center",justifyContent:"center",margin:e.spacing(4,4)},statusBar:{padding:e.spacing(.5,2),alignItems:"center",display:"flex",justifyContent:"space-between"}})}));function E(e){var t,s,r,c,i=G(),u=e.process,o=!u.processing&&u.success,l=!u.processing&&!u.success,j=Object(n.jsxs)("div",{className:Object(M.a)("status",u.processing&&"status-processing",o&&"status-success",l&&"status-failed"),children:[Object(n.jsx)(d.a,{variant:"h6",component:"span",children:u.processing?"\u6b63\u5728\u8ba1\u7b97":u.success?"\u5df2\u5b8c\u6210":"\u8ba1\u7b97\u9519\u8bef"}),Object(n.jsx)(d.a,{variant:"h6",component:"span",children:o&&u.result?u.result.distance.toFixed(4)+"m":""})]});return Object(n.jsxs)(p.a,{className:i.progress,button:!0,children:[j,Object(n.jsxs)("div",{className:"files",children:[Object(n.jsxs)(d.a,{variant:"body1",children:["a: ",u.a.filename]}),Object(n.jsx)(d.a,{variant:"body2",children:H()(1e3*u.a.time).format("YYYY-MM-DD HH:mm:ss")}),Object(n.jsxs)(d.a,{variant:"body1",children:["b: ",u.b.filename]}),Object(n.jsx)(d.a,{variant:"body2",children:H()(1e3*u.b.time).format("YYYY-MM-DD HH:mm:ss")}),u.result?Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsxs)(d.a,{variant:"body1",children:["ta1: ",null===(t=u.result.ta1)||void 0===t?void 0:t.toFixed(4),"s ta3: ",null===(s=u.result.ta3)||void 0===s?void 0:s.toFixed(4),"s"]}),Object(n.jsxs)(d.a,{variant:"body1",children:["tb1: ",null===(r=u.result.tb1)||void 0===r?void 0:r.toFixed(4),"s tb3: ",null===(c=u.result.tb3)||void 0===c?void 0:c.toFixed(4),"s"]})]}):null]})]})}function J(){var e=G(),t=a.a.useState(!1),s=Object(u.a)(t,2),r=s[0],c=s[1],i=a.a.useState(null),o=Object(u.a)(i,2),l=o[0],p=o[1],v=a.a.useState(null),m=Object(u.a)(v,2),O=m[0],y=m[1];a.a.useEffect((function(){B().then((function(e){e.success?(e.data.server_state.process.reverse(),p(e.data),y(null)):(p(null),y(e))}));var e=setTimeout((function(){return c(!r)}),500);return function(){return clearTimeout(e)}}),[r]);var w=O?Object(n.jsxs)(d.a,{variant:"body1",className:e.exception,children:["\u7f51\u7edc\u8bf7\u6c42\u51fa\u73b0\u5f02\u5e38: ",O.message]}):l?Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsxs)("div",{className:e.statusBar,children:[Object(n.jsxs)(d.a,{variant:"h6",color:"textPrimary",children:["\u72b6\u6001\uff1a",l.files.a||l.files.b?l.files.a&&!l.files.b?"A \u5df2\u4e0a\u4f20\uff0c\u7b49\u5f85 B \u4e0a\u4f20":!l.files.a&&l.files.b?"B \u5df2\u4e0a\u4f20\uff0c\u7b49\u5f85 A \u4e0a\u4f20":"A\u3001B \u5747\u5df2\u4e0a\u4f20\uff0c\u7b49\u5f85\u5904\u7406":"\u7b49\u5f85\u5ba2\u6237\u7aef\u4e0a\u4f20\u97f3\u9891"]}),Object(n.jsx)(j.a,{variant:"outlined",color:"primary",onClick:function(){C().then((function(){c(!r)}))},children:"\u91cd\u7f6e"})]}),l.server_state.process.length>0?Object(n.jsxs)(b.a,{children:[l.server_state.process.map((function(e,t){return Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsx)(x.a,{}),Object(n.jsx)(E,{process:e})]},t)})),Object(n.jsx)(x.a,{})]}):Object(n.jsx)(d.a,{variant:"body1",className:e.exception,children:"\u6682\u65e0\u4efb\u52a1"})]}):Object(n.jsx)(d.a,{variant:"body1",className:e.exception,children:"\u6b63\u5728\u52a0\u8f7d\u4e2d"});return Object(n.jsxs)(f.a,{className:e.paper,children:[Object(n.jsxs)("div",{className:e.header,children:[Object(n.jsx)(d.a,{variant:"h6",component:"span",children:"\u6d4b\u8ddd\u670d\u52a1\u5668"}),Object(n.jsx)(h.a,{onClick:function(){return c(!r)},children:Object(n.jsx)(g.a,{})})]}),Object(n.jsx)("div",{className:e.content,children:w})]})}var R=function(){var e=G();return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(v.a,{position:"static",children:Object(n.jsx)(m.a,{children:Object(n.jsx)(d.a,{variant:"h6",className:e.title,children:"\u6d4b\u8ddd"})})}),Object(n.jsx)(O.a,{maxWidth:"lg",children:Object(n.jsx)(J,{})})]})};i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(R,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.ae59148a.chunk.js.map